<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Allinea Metric Plugin Interface: Allinea Performance Reports Integration</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="project-icon.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Allinea Metric Plugin Interface
   
   </div>
   <div id="projectbrief">Metrics Plugin Interface for MAP</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('partial.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Allinea Performance Reports Integration </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="introduction"></a>
Introduction</h2>
<p>One or more metric plugins can also be integrated into Allinea Performance Reports by providing a small 'partial report' file that describes the additions to be made to a Performance Report. The report will display 'report metrics' obtained by combining the values sampled for a metric specified metric. It is possible to select which values from a metric (min, max, mean or sum) to be used and how to accumulate them (min, max or mean).</p>
<h2><a class="anchor" id="defaultLoc"></a>
Default definition file location</h2>
<p>This custom partial report content can be defined in one or multiple custom report definition files, that have to be placed under the following folder structure in the default configuration path: <em>~/.allinea/perf-report/reports/</em></p>
<p>When multiple files are found in the directory then all of them will be loaded and used during report generation.</p>
<p><b>Note:</b> default configuration folder can be redefined with <em>ALLINEA_CONFIG_DIR</em> environment variable, but the sub-folder structure has to be the same in order to use this feature (i.e. <em>$ALLINEA_CONFIG_DIR/perf-report/reports/</em>).</p>
<h2><a class="anchor" id="customLoc"></a>
Custom definition file location</h2>
<p>Location of the custom partial report definition file(s) can be overriden using <em>ALLINEA_PARTIAL_REPORT_SOURCE</em> environment variable, which can either point to a single XML file or a folder. When a folder is specified then sub-folders are not searched for files, but all XML files from that level will be loaded in ascending alphabetical order.</p>
<h2><a class="anchor" id="xmlFormat"></a>
Partial report definition file</h2>
<p>General layout of the file is the following: first define the report metrics that need to be used in the report, then define the layout of the subsection that is visible in the report.</p>
<p>An example partial report definition file:</p>
<div class="fragment"><pre class="fragment">&lt;partialReport name=<span class="stringliteral">&quot;com.allinea.myReport&quot;</span>
               xmlns=<span class="stringliteral">&quot;http://www.allinea.com/2016/AllineaReports&quot;</span>&gt;
  &lt;reportMetrics&gt;
    &lt;!-- multiple &lt;reportMetric&gt; elements can be defined --&gt;
    &lt;!-- source attribute must be <span class="keyword">set</span> to <span class="stringliteral">&quot;metric&quot;</span> --&gt;
    &lt;reportMetric <span class="keywordtype">id</span>=<span class="stringliteral">&quot;com.allinea.metrics.sample.average&quot;</span>
                  displayName=<span class="stringliteral">&quot;Average of custom interrupt metric&quot;</span>
                  units=<span class="stringliteral">&quot;/s&quot;</span>
                  colour=<span class="stringliteral">&quot;hsl(19, 70, 71)&quot;</span>
                  source=<span class="stringliteral">&quot;metric&quot;</span>&gt;
      &lt;!-- metricRef: reference to an entry in metricdefinitions element --&gt;
      &lt;!-- sampleValue: data value from each sample to take: min, max, mean or sum across processes --&gt;
      &lt;!-- aggregation: how to aggregate per-sample values into a single value: min, max, mean across time --&gt;
      &lt;sourceDetails metricRef=<span class="stringliteral">&quot;com.allinea.metrics.sample.interrupts&quot;</span>
                     sampleValue=<span class="stringliteral">&quot;mean&quot;</span>
                     aggregation=<span class="stringliteral">&quot;mean&quot;</span>/&gt;
    &lt;/reportMetric&gt;
  &lt;/reportMetrics&gt;
  &lt;subsections&gt;
    &lt;!-- multiple &lt;subsection&gt; elements can be defined --&gt;
    &lt;subsection <span class="keywordtype">id</span>=<span class="stringliteral">&quot;my_metrics&quot;</span>
                heading=<span class="stringliteral">&quot;My metrics&quot;</span>
                colour=<span class="stringliteral">&quot;hsl(23, 83, 59)&quot;</span>&gt;
      &lt;text&gt;Section one:&lt;/text&gt;
      &lt;!-- multiple &lt;entry&gt; elements can be defined --&gt;
      &lt;entry reportMetric=<span class="stringliteral">&quot;com.allinea.metrics.sample.average&quot;</span>
             group=<span class="stringliteral">&quot;interruptGroup&quot;</span> /&gt;
    &lt;/subsection&gt;
  &lt;/subsections&gt;
&lt;/partialReport&gt;
</pre></div><h3><a class="anchor" id="partialReport"></a>
&lt;partialReport&gt;</h3>
<div class="fragment"><pre class="fragment">&lt;partialReport name=<span class="stringliteral">&quot;com.allinea.myReport&quot;</span>
               xmlns=<span class="stringliteral">&quot;http://www.allinea.com/2016/AllineaReports&quot;</span>&gt;
&lt;/partialReport&gt;
</pre></div><dl class="user"><dt><b>name:</b></dt><dd>A name that uniquely identifies this report. The name is used to distinguish between different kind of reports. See <a class="el" href="partial.html#xml-reserved-id">Reserved Names/IDs and Restrictions</a> for reserved names.</dd></dl>
<dl class="user"><dt><b>xmlns:</b></dt><dd>The <code>xmlns="http://www.allinea.com/2016/AllineaReports"</code> attribute <em>must</em> be included in the <code>&lt;parialReport&gt;</code> element.</dd></dl>
<h3><a class="anchor" id="reportMetrics"></a>
&lt;reportMetrics&gt;</h3>
<p>Container for one or more <code>&lt;reportMetric&gt;</code> elements.</p>
<h3><a class="anchor" id="reportMetric"></a>
&lt;reportMetric&gt;</h3>
<div class="fragment"><pre class="fragment">&lt;reportMetric <span class="keywordtype">id</span>=<span class="stringliteral">&quot;com.allinea.metrics.sample.average&quot;</span> displayName=<span class="stringliteral">&quot;Average of custom interrupt metric&quot;</span> units=<span class="stringliteral">&quot;/s&quot;</span> colour=<span class="stringliteral">&quot;hsl(19, 70, 71)&quot;</span>
              source=<span class="stringliteral">&quot;metric&quot;</span>&gt;
  &lt;sourceDetails metricRef=<span class="stringliteral">&quot;com.allinea.metrics.sample.interrupts&quot;</span> sampleValue=<span class="stringliteral">&quot;mean&quot;</span> aggregation=<span class="stringliteral">&quot;mean&quot;</span>/&gt;
&lt;/reportMetric&gt;
</pre></div><p>Each <code>&lt;reportMetric&gt;</code> element describes a single metric that is stored as a double value.</p>
<dl class="user"><dt><b>id:</b></dt><dd>A unique identifier for this metric. This will be used to reference this metric in <code>&lt;entry&gt;</code> element(s). Ids with dots in their value should not be substrings of each other. For example, com.allinea.metrics.sample is a substring of com.allinea.metrics.sample.average and therefore not allowed. See <a class="el" href="partial.html#xml-reserved-id">Reserved Names/IDs and Restrictions</a> for reserved names.</dd></dl>
<dl class="user"><dt><b>displayName:</b></dt><dd>The name for this metric, as it will be seen in the report.</dd></dl>
<dl class="user"><dt><b>units:</b></dt><dd>The units this metric is measure in, as it will be seen in the report. Units are auto-scaled with SI (G, M, k) and IEC (Gi, Mi, ki) prefixes, but no negative exponent scaling is performed. Therefore we advise to scale custom metrics and select custom units accordingly.</dd></dl>
<dl class="user"><dt><b>colour (optional):</b></dt><dd>The colour to be used for this metric when it is named in the report, also used for any comparison bars showing the relative value of this metric. See <a class="el" href="partial.html#xml-colour-codes">Colour codes</a>.</dd></dl>
<dl class="user"><dt><b>source:</b></dt><dd>Source type of this metric, must be set to <code>metric</code>.</dd></dl>
<h3><a class="anchor" id="sourceDetails"></a>
&lt;sourceDetails&gt;</h3>
<div class="fragment"><pre class="fragment">&lt;sourceDetails metricRef=<span class="stringliteral">&quot;com.allinea.metrics.sample.interrupts&quot;</span> sampleValue=<span class="stringliteral">&quot;mean&quot;</span> aggregation=<span class="stringliteral">&quot;mean&quot;</span>/&gt;
</pre></div><p>Describes the details of the source metric used in this report element.</p>
<dl class="user"><dt><b>metricRef</b></dt><dd>Reference to an existing metric, can be either an Allinea or a user defined (custom) metric.</dd></dl>
<dl class="user"><dt><b>sampleValue</b></dt><dd>Which sample value of the referenced source metric to be used (options: <em>min/max/mean</em>).</dd></dl>
<dl class="user"><dt><b>aggregation</b></dt><dd>How the samples over all samples are aggregated (options: <em>min/max/mean</em>).</dd></dl>
<h3><a class="anchor" id="subsections"></a>
&lt;subsections&gt;</h3>
<p>Container for one or more <code>&lt;subsection&gt;</code> elements.</p>
<h3><a class="anchor" id="subsection"></a>
&lt;subsection&gt;</h3>
<div class="fragment"><pre class="fragment">&lt;subsection <span class="keywordtype">id</span>=<span class="stringliteral">&quot;my_metrics&quot;</span>
            heading=<span class="stringliteral">&quot;My metrics&quot;</span>
            colour=<span class="stringliteral">&quot;hsl(23, 83, 59)&quot;</span>&gt;
  &lt;!-- can add a &lt;text&gt; element with further description --&gt;
  &lt;!-- multiple &lt;entry&gt; elements can be defined --&gt;
&lt;/subsection&gt;
</pre></div><p>Describes the layout of the data to be displayed.</p>
<dl class="user"><dt><b>id:</b></dt><dd>A unique identifier for this subsection.</dd></dl>
<dl class="user"><dt><b>heading:</b></dt><dd>The display name for this subsection.</dd></dl>
<dl class="user"><dt><b>colour (optional):</b></dt><dd>The colour to use for the heading text. See <a class="el" href="partial.html#xml-colour-codes">Colour codes</a>.</dd></dl>
<h3><a class="anchor" id="text"></a>
&lt;text&gt;</h3>
<div class="fragment"><pre class="fragment">&lt;text&gt;Section one:&lt;/text&gt;
</pre></div><p>Short static description of this subsection.</p>
<h3><a class="anchor" id="entry"></a>
&lt;entry&gt;</h3>
<div class="fragment"><pre class="fragment">&lt;entry reportMetric=<span class="stringliteral">&quot;com.allinea.metrics.sample.average&quot;</span>
       group=<span class="stringliteral">&quot;interruptGroup&quot;</span> /&gt;
</pre></div><p>Describes one of the metrics to be listed in the subsections of the report.</p>
<dl class="user"><dt><b>reportMetric:</b></dt><dd>Referenced report metric that is to be displayed.</dd></dl>
<dl class="user"><dt><b>group (optional):</b></dt><dd>The optional <em>group</em> attribute is used to determine how to scale comparison bars indicating the relative size of two or more metric values. If two &lt;entry&gt; elements have the same value for their <em>group</em> attribute then they are considered comparable and will have comparison bars drawn at the same scale.</dd></dl>
<h2><a class="anchor" id="xml-colour-codes"></a>
Colour codes</h2>
<p>Colours may be specified in one of the following forms:</p>
<ul>
<li><code>#RGB</code> (each of R, G, and B is a single hex digit)</li>
<li><code>#RRGGBB</code> </li>
<li><code>#RRRGGGBBB</code> </li>
<li><code>#RRRRGGGGBBBB</code> </li>
<li><code>rgb(X,Y,Z)</code> (each of X, Y, and Z is an decimal value in the range 0-255)</li>
<li><code>hsv(H,S,V)</code> (H in the range 0-359, S, and V in the range 0-100)</li>
<li><code>hsl(H,S,L)</code> (H in the range 0-359, S, and L in the range 0-100)</li>
<li>A name from the list of colors defined in the list of SVG color keyword names provided by the World Wide Web Consortium: <a href="https://www.w3.org/TR/SVG/types.html#ColorKeywords">https://www.w3.org/TR/SVG/types.html#ColorKeywords</a></li>
</ul>
<h2><a class="anchor" id="xml-reserved-id"></a>
Reserved Names/IDs and Restrictions</h2>
<p>All names and IDs starting with <code>allinea</code>. or <code>com.allinea</code>. are reserved and can not be used in the partial report definition file. Instead, for example use your reversed Internet domain name as prefix.</p>
<p>IDs must be a valid XML NCName (see <a href="https://www.w3.org/TR/xmlschema-2/#NCName">https://www.w3.org/TR/xmlschema-2/#NCName</a>) - put simply it cannot contain many symbols (although '.', '_' and '-' are ok), and cannot begin with with '.' or '_'.</p>
<h2><a class="anchor" id="xml-html"></a>
HTML Markup</h2>
<p>Most text in the partial report definition XML file that will be inserted directly into the generated report can contain a limited subset of HTML markup. Supported elements include headings, ordered and unordered lists, <code>span</code>, <code>div</code>, <code>p</code>, <code>a</code> <code>b</code>, <code>i</code>, <code>img</code> etc. </p>
</div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Typedefs</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
