<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Allinea Metric Plugin Interface: Metric Definition File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="project-icon.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Allinea Metric Plugin Interface
   
   </div>
   <div id="projectbrief">Metrics Plugin Interface for MAP</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('xml.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Metric Definition File </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Metric libraries that implement the <a class="el" href="group__template.html">Metric Plugin Template</a> and make calls to the <a class="el" href="group__api.html">Metric Plugin API</a> can be added to compatible profilers through the use of a <em>metric</em> <em>definitions</em> file.</p>
<p>This is a short <code>xml</code> file that defines the location of a metric plugin library and lists both the metrics that library can provide and how the profiler should process &amp; display the metric data returned by that library.</p>
<p>A metric definitions file follows has the following layout:</p>
<div class="fragment"><pre class="fragment">&lt;metricdefinitions version=<span class="stringliteral">&quot;1&quot;</span>&gt;
    &lt;!-- <span class="stringliteral">&#39;metric&#39;</span> element(s) defining the metrics provided by the library --&gt;

    &lt;!-- &#39;metricGroup&#39; element(s) describing how the metrics should be
         grouped when displayed by a profiler --&gt;

    &lt;!-- &#39;source&#39; element(s) specifying the location of the metrics library
         the profiler should load and, optionally, a list of libraries to
         preload into the profiled application --&gt;
&lt;/metricdefinitions&gt;
</pre></div><p>See <a class="el" href="sample_8xml-example.html">sample::xml</a> for a complete metric definition file. The elements are described in detail below:</p>
<h2><a class="anchor" id="xml-metric"></a>
&lt;metric&gt;</h2>
<div class="fragment"><pre class="fragment">    &lt;metric <span class="keywordtype">id</span>=<span class="stringliteral">&quot;com.allinea.metrics.myplugin.mymetric1&quot;</span>&gt;
        &lt;units&gt;%&lt;/units&gt;
        &lt;dataType&gt;[uint64_t|double]&lt;/dataType&gt;
        &lt;domain&gt;time&lt;/domain&gt;
        &lt;onePerNode&gt;[<span class="keyword">false</span>|<span class="keyword">true</span>]&lt;/onePerNode&gt;
        &lt;source ref=<span class="stringliteral">&quot;com.allinea.metrics.myplugin_src&quot;</span> functionName=<span class="stringliteral">&quot;mymetric1&quot;</span>/&gt;
        &lt;display&gt;
            &lt;description&gt;Human readable description&lt;/description&gt;
            &lt;displayName&gt;Human readable display name&lt;/displayName&gt;
            &lt;type&gt;instructions&lt;/type&gt;
            &lt;colour&gt;green&lt;/colour&gt;
        &lt;/display&gt;
    &lt;/metric&gt;
</pre></div><p>Each <code>&lt;metric&gt;</code> element describes a single metric that is provided by a metric plugin library. The id attribute of the opening <code>&lt;metric&gt;</code> element is the identifier used by this definition file and the profiler to uniquely identify this metric. To avoid confusion this should not contain any whitespace and should (as far as possible) be chosen to minimise the risk of clashing with an existing metric name. We recommend deriving your metric ids from your website domain name and the name of plugin library i.e. <code>com.allinea.metrics.myplugin.mymetric1</code> </p>
<dl class="user"><dt><b>units:</b></dt><dd>The units this metric is measured in. The profiler may automatically rescale the units to better display large numbers to the end user (e.g. convert <code>B</code> to <code>kB</code>). Possible values include <code>%</code> (percentage), <code>B</code> (bytes), <code>B/s</code> (bytes per second), <code>calls/s</code> (calls per second), <code>/s</code> (per second), <code>ns</code> (nanoseconds), <code>J</code> (joule) and <code>W</code> (watts, joules per second). Other units can be specified but there is no guarantee the profiler will know how to rescale them to accomodate particularly large or small numbers.</dd></dl>
<dl class="user"><dt><b>dataType:</b></dt><dd>The datatype used to represent this metric. Possible values are <code>uint64_t</code> (exact integer) and <code>double</code> (floating point).</dd></dl>
<dl class="user"><dt><b>domain:</b></dt><dd>The domain in which sampling occurs. The only supported domain is <code>time</code>.</dd></dl>
<dl class="user"><dt><b>onePerNode</b></dt><dd>If <code>false</code> then all processes will report this metric. If <code>true</code> then only one process on each each node (machine) will calculate and return this metric. Use <code>true</code> when the metric is a machine-level metric that can't be attributed to a individual process. The default value (if this element is omitted) is <code>false</code>.</dd></dl>
<dl class="user"><dt><b>source:</b></dt><dd><ul>
<li><code>ref</code> is the id of the <a class="el" href="xml.html#xml-source">&lt;source&gt;</a> element detailing the metric plugin library that contains that function. The function in <code>functionName</code> must have the appropriate signature for a metric getter, see <a class="el" href="group__template.html#gad4ba35465aa86b880f79b3a5e4353fff" title="Example of a integer metric getter function.">mymetric_getIntValue()</a> as an example.</li>
<li><code>functionName</code> is the name of the function to call to obtain a value for this metric.</li>
<li><code>divideBySampleTime:</code> If <code>true</code> the metric <em>getter</em> function returns the difference in the measured value since the last sample. The profiler should divide the returned value by the time elapsed since the last sample to get the true value. If <code>false</code> the value returned by the <em>getter</em> function is left unaltered.</li>
</ul>
</dd></dl>
<dl class="user"><dt><b>display:</b></dt><dd>Options describing how this metric should be presented to end users.<ul>
<li><code>description</code> A human-readable description of this metric, suitable for tooltips or some short summary text.</li>
<li><code>displayName</code> The human-readable display name for this metric</li>
<li><code>type</code> An identifier for the broad category this metric falls under. Currently supported values are <code>cpu_time</code>, <code>energy</code>, <code>instructions</code>, <code>io</code>, <code>memory</code>, <code>mpi</code> and <code>other</code>.</li>
<li><code>colour</code> A colour to use when displaying the metric (i.e. the colour of any graphs generated using this metric). This field is advisory - the profiler may choose to use a colour based on the <code>type</code> field instead of the colour code specified here. Colour values may be:<ul>
<li>a RGB hex code of the form #RGB, #RRGGBB, #RRRGGGBBB or #RRRRGGGGBBBB (each of R, G, and B is a single hex digit)</li>
<li>a <a href="http://www.w3.org/TR/SVG/types.html#ColorKeywords">SVG color keyword</a> i.e. <code>green</code>.</li>
</ul>
</li>
</ul>
</dd></dl>
<h2><a class="anchor" id="xml-group"></a>
&lt;metricGroup&gt;</h2>
<div class="fragment"><pre class="fragment">    &lt;metricGroup <span class="keywordtype">id</span>=<span class="stringliteral">&quot;foo&quot;</span>&gt;
        &lt;displayName&gt;Foo Metrics&lt;/displayName&gt;
        &lt;description&gt;All metrics relating to foo.&lt;/description&gt;
        &lt;metric ref=<span class="stringliteral">&quot;com.allinea.metrics.myplugin.mymetric1&quot;</span>/&gt;
        &lt;metric ref=<span class="stringliteral">&quot;com.allinea.metrics.myplugin.mymetric2&quot;</span>/&gt;
        &lt;metric ref=<span class="stringliteral">&quot;com.allinea.metrics.myplugin.mymetric3&quot;</span>/&gt;
    &lt;/metricGroup&gt;
</pre></div><p> Each <code>metricGroup</code> element describes a collection of metrics that should be grouped together. The profiler's UI may provide actions that apply to all metrics of a group (i.e. show/hide all of a group's metrics). Metric groups are for display purposes only and do not effect the gathering of metrics.</p>
<dl class="user"><dt><b>displayName:</b></dt><dd>A human readable name for this metric group</dd></dl>
<dl class="user"><dt><b>description:</b></dt><dd>A human-readable description of this metric group, suitable for tooltips or some short summary text.</dd></dl>
<dl class="user"><dt><b>metric:</b></dt><dd>One or more elements each referencing a <a class="el" href="xml.html#xml-metric">&lt;metric&gt;</a> element elsewhere in this <code></code>.xml file.</dd></dl>
<h2><a class="anchor" id="xml-source"></a>
&lt;source&gt;</h2>
<p>Each <code>&lt;source&gt;</code> element represents a metric plugin library that is available for loading. The specific metrics in that library are listed as <a class="el" href="xml.html#xml-metric"><code>&lt;metric&gt;</code> </a>elements above. </p>
<div class="fragment"><pre class="fragment">    &lt;source <span class="keywordtype">id</span>=<span class="stringliteral">&quot;com.allinea.metrics.myplugin_src&quot;</span>&gt;
        &lt;sharedLibrary&gt;lib-myplugin.so&lt;/sharedLibrary&gt;
        &lt;preload&gt;lib-mywrapper1.so&lt;/preload&gt;
        &lt;preload&gt;lib-mywrapper2.so&lt;/preload&gt;
    &lt;/source&gt;
</pre></div><dl class="user"><dt><b>id:</b></dt><dd>The id by which this library will be referenced in this <code></code>.xml file. Used in the <code>source</code> fields of <a class="el" href="xml.html#xml-metric"><code>&lt;metric&gt;</code>  elements.</a> </dd></dl>
<dl class="user"><dt><b>sharedLibrary:</b></dt><dd>The actual library implementing the <a class="el" href="group__template.html">Metric Plugin Template</a>. This must be located in a directory that will be checked by the profiler (see the profiler's documentation to determine which directories will be searched to resolve the library name here.</dd></dl>
<dl class="user"><dt><b>preload:</b></dt><dd>A list of shared libraries to be preloaded into the application to profile. Preloads are optional, and they may be used to wrap function calls from the profiled application into other shared libraries. As for the <code>sharedLibrary</code>, preloads have to be located in a directory checked by the profiler. </dd></dl>
</div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Typedefs</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
